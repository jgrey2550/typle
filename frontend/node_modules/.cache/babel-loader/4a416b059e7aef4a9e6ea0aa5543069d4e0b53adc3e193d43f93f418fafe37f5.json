{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\brandon\\\\html2\\\\typle\\\\typlev1Copy\\\\app\\\\frontend\\\\src\\\\components\\\\jsx_typle\\\\wordsTyple.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport MenuButton from '../jsx_buttons/menuButton';\nimport { UserContext } from '../../contexts/userContext';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction WordsTyple(_ref) {\n  _s();\n  let {\n    text\n  } = _ref;\n  const apiUrl = 'https://typle-omega.vercel.app';\n  //switch to http://localhost:5000 when on local\n\n  const {\n    user\n  } = useContext(UserContext);\n  const [topWPM, setTopWPM] = useState(null);\n\n  //timer part\n  const [elapsedTime, setElapsedTime] = useState(0);\n  const [timerOnOff, setTimerOnOff] = useState(0);\n  const [wpm, setWpm] = useState(null);\n  const words = text.split(\" \");\n  const numWords = words.length;\n  React.useEffect(() => {\n    //intervalId is what is what the setInterval method puts data into\n    let intervalId;\n    let startTime;\n    if (user) {\n      axios.get(`${apiUrl}/api/userStats/${user}`).then(response => {\n        setTopWPM(response.data.topWPM);\n      }).catch(error => {\n        console.log(\"error\" + error);\n      });\n    }\n    if (timerOnOff === 1) {\n      startTime = Date.now();\n      //setInterval built in java function 2 params (function, interval)\n      //so updates time every 1 milisecond\n      intervalId = setInterval(() => {\n        const currentTime = Date.now();\n        const newTime = currentTime - startTime;\n        setElapsedTime(newTime);\n      }, 1);\n    }\n    if (timerOnOff === 2) {\n      setElapsedTime(0);\n    }\n    if (timerOnOff === 3) {\n      setWpm((numWords / (elapsedTime / 60000)).toFixed(2));\n      let wpm = (numWords / (elapsedTime / 60000)).toFixed(2);\n      if (wpm > topWPM) {\n        axios.put(`${apiUrl}/api/userStatsWPM/${user}`, {\n          wpm\n        }).then(response => {\n          console.log('User profile updated:', response.data);\n        }).catch(error => {\n          console.error('Error updating user profile:', error);\n        });\n      }\n    }\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [timerOnOff]);\n  const [userInput, setUserInput] = useState('');\n  const [currentIndex, setCurrentIndex] = useState(0);\n  useEffect(() => {\n    const handleKeyDown = event => {\n      const {\n        key\n      } = event;\n\n      //gets currentChar in level\n      const currentChar = text[currentIndex];\n      if (key === currentChar) {\n        setUserInput(prevInput => prevInput + key);\n        setCurrentIndex(prevIndex => prevIndex + 1);\n        if (currentIndex === text.length - 1) {\n          setTimerOnOff(3);\n          // console.log(elapsedTime);\n        }\n\n        if (currentIndex === 0) {\n          //starts timer when user starts\n          setTimerOnOff(1);\n        }\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [currentIndex, text]);\n\n  //appending text to renderText for as many correct keys user has pushed\n  const renderText = () => {\n    let renderedText = [];\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      const style = i < currentIndex ? {\n        color: 'blue'\n      } : {\n        color: 'black'\n      };\n      renderedText.push( /*#__PURE__*/_jsxDEV(\"span\", {\n        style: style,\n        children: char\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this));\n    }\n    return renderedText;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"center\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Type!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: renderText()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Time: \", elapsedTime / 1000, \" secondes\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }, this), timerOnOff === 3 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"EndScreen\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"You completed the Typle!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Time: \", elapsedTime / 1000, \" secondes\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Words per min: \", wpm]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(MenuButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 30\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n_s(WordsTyple, \"bXH/MYIzHJuelLjK1s8wPDhUoIA=\");\n_c = WordsTyple;\nexport default WordsTyple;\nvar _c;\n$RefreshReg$(_c, \"WordsTyple\");","map":{"version":3,"names":["React","useState","useEffect","useContext","MenuButton","UserContext","axios","jsxDEV","_jsxDEV","WordsTyple","_ref","_s","text","apiUrl","user","topWPM","setTopWPM","elapsedTime","setElapsedTime","timerOnOff","setTimerOnOff","wpm","setWpm","words","split","numWords","length","intervalId","startTime","get","then","response","data","catch","error","console","log","Date","now","setInterval","currentTime","newTime","toFixed","put","clearInterval","userInput","setUserInput","currentIndex","setCurrentIndex","handleKeyDown","event","key","currentChar","prevInput","prevIndex","document","addEventListener","removeEventListener","renderText","renderedText","i","char","style","color","push","children","fileName","_jsxFileName","lineNumber","columnNumber","className","_c","$RefreshReg$"],"sources":["C:/Users/brandon/html2/typle/typlev1Copy/app/frontend/src/components/jsx_typle/wordsTyple.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport MenuButton from '../jsx_buttons/menuButton';\nimport { UserContext } from '../../contexts/userContext';\nimport axios from 'axios';\n\n\nfunction WordsTyple({text}) {\n    const apiUrl = 'https://typle-omega.vercel.app';\n    //switch to http://localhost:5000 when on local\n    \n    const {user} = useContext(UserContext);\n    const [topWPM, setTopWPM] = useState(null);\n\n    //timer part\n    const [elapsedTime, setElapsedTime] = useState(0);\n    const [timerOnOff, setTimerOnOff] = useState(0);\n    const [wpm, setWpm] = useState(null);\n\n    const words = text.split(\" \");\n    const numWords = words.length;\n\n    React.useEffect(() => {\n        //intervalId is what is what the setInterval method puts data into\n        let intervalId;\n        let startTime;\n\n        if(user) {\n          axios.get(`${apiUrl}/api/userStats/${user}`)\n            .then(response => {\n              setTopWPM(response.data.topWPM);\n            })\n            .catch(error => {\n              console.log(\"error\" + error);\n            })\n        }\n    \n        if (timerOnOff === 1) {\n            startTime = Date.now();\n            //setInterval built in java function 2 params (function, interval)\n            //so updates time every 1 milisecond\n            intervalId = setInterval(() => {\n                const currentTime = Date.now();\n                const newTime = currentTime - startTime;\n                setElapsedTime(newTime);\n            }, 1);\n        }\n    \n        if(timerOnOff === 2) {\n            setElapsedTime(0);\n        }\n\n        if(timerOnOff === 3) {\n          setWpm((numWords/(elapsedTime/60000)).toFixed(2));\n          let wpm = (numWords/(elapsedTime/60000)).toFixed(2);\n          if(wpm > topWPM) {\n            axios.put(`${apiUrl}/api/userStatsWPM/${user}`, {wpm})\n              .then(response => {\n                  console.log('User profile updated:', response.data);\n              })\n              .catch(error => {\n                  console.error('Error updating user profile:', error);\n              });\n          }\n        }\n        \n        return () => {\n          clearInterval(intervalId);\n        };\n      }, [timerOnOff]);\n\n  const [userInput, setUserInput] = useState('');\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      const { key } = event;\n\n      //gets currentChar in level\n      const currentChar = text[currentIndex];\n\n      if (key === currentChar) {\n        setUserInput((prevInput) => prevInput + key);\n        setCurrentIndex((prevIndex) => prevIndex + 1);\n        if(currentIndex === (text.length - 1)) {\n            setTimerOnOff(3);\n            // console.log(elapsedTime);\n        }\n        if(currentIndex === 0) {\n          //starts timer when user starts\n          setTimerOnOff(1);\n        }\n      }\n      \n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [currentIndex, text]);\n\n  //appending text to renderText for as many correct keys user has pushed\n  const renderText = () => {\n    let renderedText = [];\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      const style =\n        i < currentIndex\n          ? { color: 'blue' }\n          : { color: 'black' };\n      renderedText.push(\n        <span key={i} style={style}>\n          {char}\n        </span>\n      );\n    }\n    return renderedText;\n  };\n\n  return (\n    <div>\n        <center>\n            <h1>Type!</h1>\n            <p>{renderText()}</p>\n            <p>Time: {elapsedTime/1000} secondes</p>\n        </center>\n        {timerOnOff === 3 ? (<div className=\"EndScreen\">\n            <h1>You completed the Typle!</h1>\n            <br />\n            <p>Time: {elapsedTime/1000} secondes</p>\n            <p>Words per min: {wpm}</p>\n            <MenuButton />\n        </div>) : null}\n    </div>\n  );\n}\n\nexport default WordsTyple;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}