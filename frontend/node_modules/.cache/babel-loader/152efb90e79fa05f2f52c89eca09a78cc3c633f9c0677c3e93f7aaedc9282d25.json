{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\brandon\\\\html2\\\\typle\\\\typlev1\\\\app\\\\frontend\\\\src\\\\components\\\\jsx_campaign\\\\endScreen.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from \"react\";\nimport MenuButton from '../jsx_buttons/menuButton';\nimport CampaignButton from \"../jsx_buttons/campaignButton\";\nimport { UserContext } from \"../../contexts/userContext\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EndScreen(_ref) {\n  _s();\n  let {\n    levelNum,\n    onScreenChangeCampaign,\n    changeScreen,\n    timerReset,\n    resetIndex,\n    handleCompletionChange,\n    elapsedTime\n  } = _ref;\n  const coinsAmount = 100;\n  const {\n    user\n  } = useContext(UserContext);\n  const [fastestTime, setFastestTime] = useState(null);\n  const [endMessage, setEndMessage] = useState(\"You didn't beat your fastest time, you suck!\");\n  function resetLevel() {\n    timerReset();\n    resetIndex();\n    handleCompletionChange(1);\n  }\n  const finalTime = elapsedTime / 1000;\n  const newTime = {\n    level: levelNum,\n    time: finalTime\n  };\n  useEffect(() => {\n    axios.put(`http://localhost:5000/api/userProfile/${user}/coins`, {\n      coinsAmount\n    }).then(response => {\n      console.log('User profile updated:', response.data);\n    }).catch(error => {\n      console.error('Error updating user profile:', error);\n    });\n    axios.get(`http://localhost:5000/api/userStats/${user}`).then(response => {\n      const data = response.data.levels;\n      const levelObject = data.find(item => item.level === levelNum);\n      if (levelObject) {\n        const fastestTime = levelObject.time;\n        console.log(fastestTime);\n        if (fastestTime > finalTime) {\n          setEndMessage(\"You scored a new fastest time!\");\n          setFastestTime(finalTime);\n          axios.put(`http://localhost:5000/api/userStats/${user}`, newTime).then(response => {\n            const updatedUserStats = response.data;\n            console.log(updatedUserStats);\n            // Handle the updated userStats object\n          }).catch(error => {\n            console.log('Error updating user stats:', error);\n            // Handle the error\n          });\n        } else {\n          setFastestTime(fastestTime);\n          // setEndMessage(\"You didn't beat your fastest time, you suck!\");\n        }\n      } else {\n        setFastestTime(finalTime);\n        setEndMessage(\"You finished the level for the first time!\");\n        axios.put(`http://localhost:5000/api/userStats/${user}`, newTime).then(response => {\n          const updatedUserStats = response.data;\n          console.log(updatedUserStats);\n          // Handle the updated userStats object\n        }).catch(error => {\n          console.log('Error updating user stats:', error);\n          // Handle the error\n        });\n      }\n    }).catch(error => {\n      console.error('Error fetching fastest time:', error);\n    });\n  }, []);\n\n  // console.log(newTime);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"EndScreen\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"You completed level \", levelNum, \"!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [finalTime, \" seconds\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Fastest time: \", fastestTime]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: endMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(MenuButton, {\n      changeScreen: changeScreen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CampaignButton, {\n      onScreenChangeCampaign: onScreenChangeCampaign\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: resetLevel,\n      children: \"essayer encore\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 12\n  }, this);\n}\n_s(EndScreen, \"+wE2OhfRGMHDWC9IkS5BED2fiS8=\");\n_c = EndScreen;\nexport default EndScreen;\nvar _c;\n$RefreshReg$(_c, \"EndScreen\");","map":{"version":3,"names":["React","useContext","useEffect","useState","MenuButton","CampaignButton","UserContext","axios","jsxDEV","_jsxDEV","EndScreen","_ref","_s","levelNum","onScreenChangeCampaign","changeScreen","timerReset","resetIndex","handleCompletionChange","elapsedTime","coinsAmount","user","fastestTime","setFastestTime","endMessage","setEndMessage","resetLevel","finalTime","newTime","level","time","put","then","response","console","log","data","catch","error","get","levels","levelObject","find","item","updatedUserStats","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/brandon/html2/typle/typlev1/app/frontend/src/components/jsx_campaign/endScreen.jsx"],"sourcesContent":["import React, {useContext, useEffect, useState} from \"react\";\r\nimport MenuButton from '../jsx_buttons/menuButton';\r\nimport CampaignButton from \"../jsx_buttons/campaignButton\";\r\nimport { UserContext } from \"../../contexts/userContext\";\r\nimport axios from \"axios\";\r\n\r\nfunction EndScreen({levelNum, onScreenChangeCampaign, changeScreen, timerReset, resetIndex, handleCompletionChange, elapsedTime}) {\r\n    const coinsAmount = 100\r\n\r\n    const { user } = useContext(UserContext);\r\n    const [fastestTime, setFastestTime] = useState(null);\r\n    const [endMessage, setEndMessage] = useState(\"You didn't beat your fastest time, you suck!\");\r\n\r\n    function resetLevel() {\r\n        timerReset();\r\n        resetIndex();\r\n        handleCompletionChange(1);\r\n    }\r\n\r\n    const finalTime = elapsedTime/1000;\r\n\r\n    const newTime = {\r\n        level: levelNum,\r\n        time: finalTime\r\n    }\r\n    \r\n\r\n    useEffect(() => {\r\n        axios.put(`http://localhost:5000/api/userProfile/${user}/coins`, { coinsAmount })\r\n            .then(response => {\r\n                console.log('User profile updated:', response.data);\r\n            })\r\n            .catch(error => {\r\n                console.error('Error updating user profile:', error);\r\n            });\r\n        axios.get(`http://localhost:5000/api/userStats/${user}`)\r\n            .then(response => {\r\n                const data = response.data.levels;\r\n\r\n                const levelObject = data.find(item => item.level === levelNum);\r\n\r\n                if (levelObject) {\r\n                    const fastestTime = levelObject.time;\r\n                    console.log(fastestTime);\r\n                    if(fastestTime > finalTime) {\r\n                        setEndMessage(\"You scored a new fastest time!\");\r\n                        setFastestTime(finalTime);\r\n                        axios.put(`http://localhost:5000/api/userStats/${user}`, newTime)\r\n                            .then(response => {\r\n                                const updatedUserStats = response.data;\r\n                                console.log(updatedUserStats);\r\n                                // Handle the updated userStats object\r\n                            })\r\n                            .catch(error => {\r\n                                console.log('Error updating user stats:', error);\r\n                                // Handle the error\r\n                            });                        \r\n                    } else {\r\n                        setFastestTime(fastestTime);\r\n                        // setEndMessage(\"You didn't beat your fastest time, you suck!\");\r\n                    }\r\n                } else {\r\n                    setFastestTime(finalTime);\r\n                    setEndMessage(\"You finished the level for the first time!\");\r\n                    axios.put(`http://localhost:5000/api/userStats/${user}`, newTime)\r\n                        .then(response => {\r\n                            const updatedUserStats = response.data;\r\n                            console.log(updatedUserStats);\r\n                            // Handle the updated userStats object\r\n                        })\r\n                        .catch(error => {\r\n                            console.log('Error updating user stats:', error);\r\n                            // Handle the error\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error('Error fetching fastest time:', error);\r\n            });\r\n    }, []);\r\n\r\n\r\n    // console.log(newTime);\r\n\r\n    return <div className=\"EndScreen\">\r\n        <h1>You completed level {levelNum}!</h1>\r\n        <br/>\r\n        <h2>{finalTime} seconds</h2>\r\n        <h2>Fastest time: {fastestTime}</h2>\r\n        <br/>\r\n        <p>{endMessage}</p>\r\n        <br/>\r\n        <MenuButton changeScreen={changeScreen}/>\r\n        <CampaignButton onScreenChangeCampaign={onScreenChangeCampaign}/>\r\n        <button onClick={resetLevel}>essayer encore</button>\r\n    </div>\r\n}\r\n\r\nexport default EndScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}